# =============================================================================
# candata — environment variables
# Copy this file to .env and fill in real values.
# NEVER commit .env to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Supabase
# -----------------------------------------------------------------------------
# URL for your Supabase project (local: http://localhost:54321)
SUPABASE_URL=http://localhost:54321

# Anon key — safe to use in browser / public contexts (row-level security applies)
SUPABASE_ANON_KEY=your-anon-key

# Service role key — full DB access, server-side only, NEVER expose to clients
SUPABASE_SERVICE_KEY=your-service-key

# Direct Postgres connection (used by migrations, psql seed scripts)
# Local default shown; swap for remote pooler URL in production
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# -----------------------------------------------------------------------------
# DuckDB (pipeline staging)
# -----------------------------------------------------------------------------
# Path to the local DuckDB file used as a staging area during ETL
DUCKDB_PATH=./data/staging.duckdb

# -----------------------------------------------------------------------------
# Data Sources
# -----------------------------------------------------------------------------
# Statistics Canada SDMX / CSV base URL
STATCAN_BASE_URL=https://www150.statcan.gc.ca

# Bank of Canada Valet API base URL
BOC_VALET_URL=https://www.bankofcanada.ca/valet

# CMHC Housing Market Information Portal base URL
CMHC_BASE_URL=https://api.cmhc-schl.gc.ca/housingObserver

# Buyandsell / CanadaBuys procurement API
BUYANDSELL_BASE_URL=https://canadabuys.canada.ca/en/tender-opportunities/api/v1

# -----------------------------------------------------------------------------
# API (packages/api)
# -----------------------------------------------------------------------------
# Host and port the FastAPI server listens on
API_HOST=0.0.0.0
API_PORT=8000

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# JWT secret for signing tokens (generate with: openssl rand -hex 32)
JWT_SECRET=change-me-in-production

# Rate limits (requests per minute per tier)
RATE_LIMIT_FREE=60
RATE_LIMIT_STARTER=300
RATE_LIMIT_PRO=1000
RATE_LIMIT_BUSINESS=5000

# -----------------------------------------------------------------------------
# Next.js frontend (packages/web)
# NEXT_PUBLIC_* vars are bundled into the client — keep them non-sensitive
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# -----------------------------------------------------------------------------
# Stripe (packages/api + packages/web)
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe price IDs for each tier
STRIPE_PRICE_STARTER=price_...
STRIPE_PRICE_PRO=price_...
STRIPE_PRICE_BUSINESS=price_...

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# One of: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Structured log format: json or console
LOG_FORMAT=console
